{% extends '../layouts/layout.html' %}
{% block content %}
<div class='row'>
  <div class='col-sm-8'>
  <div class='essay-container'>
    <h1 class='essay-title'>{{essay.title}}</h1>
    <p class='essay-content'>{{essay.content|striptags|replace('\n', '<br>', 'g')|safe}}</p>
    </div>
  </div>
  <div class='col-sm-4'>
  <hr>
    <div class='text-center'>
    <a href='/essays/{{essay.id}}/edit' class='btn btn-default btn-lg'>Edit Essay</a>
    </div>
  <hr>
  <h3>Stats</h3>
  <div>
    {% if essay.objectives.length > 0 && masterObjective != null %}
    <p>Number of Words: <strong>{{ essay.objectives[0].num_words }}</strong></p>
    <p>Number of Sentences: <strong>{{ truncateNumber(essay.objectives[0].sentence_num, 3) }}</strong></p>
    <p>Reading Time: <strong>{{ essay.objectives[0].reading_time }}</strong></p>
    
    <hr>

    <p>Overused Words: {{ essay.objectives[0].overused_words }} ({{ essay.objectives[0].overused_words.length }}) | {{ masterObjective.overused_words_count }} </p>
    <p>Sentence Mean: {{ truncateNumber(essay.objectives[0].sentence_mean, 3) }} | <b>{{ percentage(normals["sentence_mean"], 3) }}</b> </p>

    <p>Sentence Var: {{ truncateNumber(essay.objectives[0].sentence_var, 3) }} |  <b>{{ percentage(normals["sentence_var"], 3) }}</b> </p>

    <p>Etymology Score: {{ percentage(essay.objectives[0].etymology_score, 3)}} |  <b>{{ percentage(normals["etymology_score"], 3) }}</b> </p>

    <p>Adjective Ratio: {{ percentage(essay.objectives[0].adj_count / essay.objectives[0].num_words, 3) }} |  <b>{{ percentage(normals["adj_ratio"], 3) }}</b>  </p>
    <p>Adverb Ratio: {{ percentage(essay.objectives[0].adv_count / essay.objectives[0].num_words, 3) }} |  <b>{{ percentage(normals["adv_ratio"], 3) }}</b>  </p>
    <p>Noun Ratio: {{ percentage(essay.objectives[0].noun_count / essay.objectives[0].num_words, 3) }} |  <b>{{ percentage(normals["noun_ratio"], 3) }}</b> </p>
    <p>Verb Ratio: {{ percentage(essay.objectives[0].verb_count / essay.objectives[0].num_words, 3) }} |  <b>{{ percentage(normals["verb_ratio"], 3) }}</b> </p>
    <p>Linking Verbs: {{ percentage(essay.objectives[0].linking_verbs / essay.objectives[0].num_words, 3) }} |  <b>{{ percentage(normals["linking_verbs"], 3) }}</b> </p>

    <p>Sentiment: {{ percentage(essay.objectives[0].sentiment, 3) }} |  <b>{{ percentage(normals["sentiment"], 3) }}</b> </p>
    {% endif %}
  </div>
  <hr>
  <h3>Suggestions</h3>
  {% if suggestions.passive.length > 0 %}
    <div class="panel">
      <div class="panel-heading h-passive">Passive Voice<span class='pull-right'><span data-toggle="tooltip" title="Passive voice puts the subject of a sentence at the end of the sentence. Example: 'The ball was hit by me.'" class='fa fa-question-circle'></span></span></div>
      <div class="panel-body">
        <p>There are <strong>{{suggestions.passive.length}}</strong> possible uses of the passive voice in this essay.</p>
      </div>
    </div>
  {% endif %}
  {% if suggestions.weasel.length > 0 %}
    <div class="panel">
      <div class="panel-heading h-weasel">Weasel Words<span class='pull-right'><span data-toggle="tooltip" title="Weasel words are words / phrases that give an impression that a specific statement has been made, but actually give a vague or ambiguous claim." class='fa fa-question-circle'></span></span></div>
      <div class="panel-body">
        <p>There are <strong>{{suggestions.weasel.length}}</strong> possible weasel words in this essay.</p>
      </div>
    </div>
  {% endif %}

  {% if suggestions.illusion.length > 0 %}
    <div class="panel">
      <div class="panel-heading h-illusion">Repeated Words<span class='pull-right'><span data-toggle="tooltip" title="This just checks for cases in which a word is used twice in a row, though in some cases that can be intentional." class='fa fa-question-circle'></span></span></div>
      <div class="panel-body">
        <p>There are <strong>{{suggestions.illusion.length}}</strong> possible repeated words in this essay.</p>
      </div>
    </div>
  {% endif %}

  {% if suggestions.adverb.length > 0 %}
    <div class="panel">
      <div class="panel-heading h-adverb">Adverbs<span class='pull-right'><span data-toggle="tooltip" title="Some adverbs, such as 'really' or 'only' can weaken the meaning of a sentence." class='fa fa-question-circle'></span></span></div>
      <div class="panel-body">
        <p>There are <strong>{{suggestions.adverb.length}}</strong> possible uses of adverbs that can weaken meaning.</p>
      </div>
    </div>
  {% endif %}

  {% if suggestions.tooWordy.length > 0 %}
    <div class="panel">
      <div class="panel-heading h-wordy">Wordy Phrasing<span class='pull-right'><span data-toggle="tooltip" title="These words or phrases can possibly be replaced with a simpler or more concise phrasing that conveys the same meaning." class='fa fa-question-circle'></span></span></div>
      <div class="panel-body">
        <p>There are <strong>{{suggestions.tooWordy.length}}</strong> possible words or phrases that can be simplified.</p>
      </div>
    </div>
  {% endif %}

  {% if suggestions.so.length > 0 %}
    <div class="panel">
      <div class="panel-heading h-so">Use of 'So'<span class='pull-right'><span data-toggle="tooltip" title="Using 'so' at the beginning of a sentence may not add meaning." class='fa fa-question-circle'></span></span></div>
      <div class="panel-body">
        <p>There are <strong>{{suggestions.so.length}}</strong> instances of 'so' being used at the beginning of a sentence.</p>
      </div>
    </div>
  {% endif %}

  {% if suggestions.thereIs.length > 0 %}
    <div class="panel">
      <div class="panel-heading h-thereIs">Use of 'There Is'<span class='pull-right'><span data-toggle="tooltip" title="Using 'there is' or 'there are' at the beginning of a sentence can cause unnecessary wordiness." class='fa fa-question-circle'></span></span></div>
      <div class="panel-body">
        <p>There are <strong>{{suggestions.thereIs.length}}</strong> instances of 'there is' or 'there are' being used at the beginning of a sentence.</p>
      </div>
    </div>
  {% endif %}
  </div>
</div>
{% endblock %}

{% block pageScripts %}
<script>
window.suggestions = {{suggestions|json|safe}};
$(function () {
  $('[data-toggle="tooltip"]').tooltip()
});

</script>
<script type="text/javascript" src="/build/js/essay.js"></script>
{% endblock %}